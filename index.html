<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buy More Now - Premium Shopping Experience</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styling.css">
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <div class="nav-logo">
      <img src="hi.png" alt="Buy More Now Logo" class="logo-img">
    </div>
    <div class="nav-address" onclick="alert('Delivering to Bhagwal Awan, Bhindar, Jaurian Kalan, Sukhnian!')">
      <i class="fa-solid fa-location-dot"></i>
      <span>Deliver to<br><strong>Bhagwal Awan, Bhindar, Jaurian Kalan</strong></span>
    </div>
    <div class="nav-search">
      <select class="search-select">
        <option>All</option>
        <option>Grocery</option>
        <option>Home</option>
        <option>Personal Care</option>
      </select>
      <input class="search-input" type="text" placeholder="Search Buy More Now">
      <div class="search-icon" onclick="handleSearch()"><i class="fa fa-search"></i></div>
    </div>
    <div class="nav-right">
      <div class="nav-account" onclick="signIn()">
        <div id="nav-greeting">Hello, sign in</div>
        <strong id="nav-account-label">Account</strong>
      </div>
      <div class="nav-cart" onclick="viewCart()">
        <i class="fa-solid fa-cart-shopping"></i>
        <span>Cart</span>
        <span id="cart-count">0</span>
      </div>
    </div>
  </div>

  <!-- Panel -->
  <div class="panel">
    <div class="panel-left">
      <i class="fa-solid fa-bars"></i> All
    </div>
    <div class="panel-ops">
      <a href="#" onclick="showOrders()">My Orders</a>
      <a href="#" onclick="showContact()">Contact Us</a>
      <a href="#" id="adminLink" style="display:none;" onclick="showAdminPanel()">Admin</a>
      <a href="#" id="logoutLink" style="display:none;" onclick="logoutUser()">Logout</a>
      <a href="#" onclick="placeOrderFromNav()">Place Order</a>
    </div>
  </div>

  <!-- Hero -->
  <div class="hero">
    <div class="hero-content">
      <h1>Premium Shopping Experience</h1>
      <p>Discover amazing products at unbeatable prices with fast delivery to your doorstep</p>
      <button class="hero-btn">Shop Now</button>
    </div>
  </div>

  <!-- Grocery Store Section -->
  <div class="grocery-gallery">
    <!-- Sugar Products -->
    <div class="grocery-item">
      <img src="Su2kg.png" alt="Sugar 2kg">
      <div class="grocery-title">Premium Sugar (2kg)</div>
      <div class="grocery-price">Rs 250</div>
      <div class="grocery-desc">Fine granulated sugar for tea, desserts, and more.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Premium Sugar (2kg)', 250, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Premium Sugar (2kg)', 250, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="su5kg.png" alt="Sugar 5kg">
      <div class="grocery-title">Premium Sugar (5kg)</div>
      <div class="grocery-price">Rs 600</div>
      <div class="grocery-desc">Bulk pack for large families and events.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Premium Sugar (5kg)', 600, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Premium Sugar (5kg)', 600, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>

    <!-- Detergents -->
    <div class="grocery-item">
      <img src="s500g.png" alt="Surf Excel 500g">
      <div class="grocery-title">Surf Excel (500g)</div>
      <div class="grocery-price">Rs 200</div>
      <div class="grocery-desc">Powerful stain removal for everyday laundry.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Surf Excel (500g)', 200, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Surf Excel (500g)', 200, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="s2kg.png" alt="Surf Excel 2kg">
      <div class="grocery-title">Surf Excel (2kg)</div>
      <div class="grocery-price">Rs 750</div>
      <div class="grocery-desc">Economical pack for tough stains and bulk washing.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Surf Excel (2kg)', 750, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Surf Excel (2kg)', 750, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="A1kg.png" alt="Ariel 1kg">
      <div class="grocery-title">Ariel (1kg)</div>
      <div class="grocery-price">Rs 220</div>
      <div class="grocery-desc">Brightens clothes and removes tough stains.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Ariel (1kg)', 220, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Ariel (1kg)', 220, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="A2kg.png" alt="Ariel 2kg">
      <div class="grocery-title">Ariel (2kg)</div>
      <div class="grocery-price">Rs 700</div>
      <div class="grocery-desc">Large pack for family laundry needs.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Ariel (2kg)', 700, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Ariel (2kg)', 700, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>

    <!-- Cooking Essentials -->
    <div class="grocery-item">
      <img src="Kisan.png" alt="Cooking Oil 1L">
      <div class="grocery-title">Kisan Cooking Oil (1L)</div>
      <div class="grocery-price">Rs 350</div>
      <div class="grocery-desc">Refined sunflower oil for healthy cooking.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Kisan Cooking Oil (1L)', 350, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Kisan Cooking Oil (1L)', 350, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Salt.png" alt="Salt 1kg">
      <div class="grocery-title">Iodized Salt (1kg)</div>
      <div class="grocery-price">Rs 80</div>
      <div class="grocery-desc">Pure iodized salt for everyday use.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Iodized Salt (1kg)', 80, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Iodized Salt (1kg)', 80, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <!-- Spices -->
    <div class="grocery-item">
      <img src="Red CHill.png" alt="Red Chilli Powder 100g">
      <div class="grocery-title">Red Chilli Powder (100g)</div>
      <div class="grocery-price">Rs 50</div>
      <div class="grocery-desc">Spicy red chilli powder for flavor and heat.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Red Chilli Powder (100g)', 50, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Red Chilli Powder (100g)', 50, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="brea.png" alt="Turmeric Powder 100g">
      <div class="grocery-title">Turmeric Powder (100g)</div>
      <div class="grocery-price">Rs 60</div>
      <div class="grocery-desc">Pure turmeric powder for cooking and health.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Turmeric Powder (100g)', 60, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Turmeric Powder (100g)', 60, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Cumin Powder (100g).png" alt="Coriander Powder 100g">
      <div class="grocery-title">Coriander Powder (100g)</div>
      <div class="grocery-price">Rs 55</div>
      <div class="grocery-desc">Aromatic coriander powder for flavor.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Coriander Powder (100g)', 55, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Coriander Powder (100g)', 55, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Garam Masala.png" alt="Garam Masala 200g">
      <div class="grocery-title">Garam Masala (200g)</div>
      <div class="grocery-price">Rs 150</div>
      <div class="grocery-desc">Aromatic blend of ground spices.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Garam Masala (200g)', 150, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Garam Masala (200g)', 150, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Cumin Powder (100g).png" alt="Cumin Powder 100g">
      <div class="grocery-title">Cumin Powder (100g)</div>
      <div class="grocery-price">Rs 65</div>
      <div class="grocery-desc">Ground cumin for authentic flavor.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Cumin Powder (100g)', 65, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Cumin Powder (100g)', 65, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>

    <!-- Personal Care -->
    <div class="grocery-item">
      <img src="Col.png" alt="Toothpaste 150g">
      <div class="grocery-title">Colgate Toothpaste (150g)</div>
      <div class="grocery-price">Rs 70</div>
      <div class="grocery-desc">Refreshing toothpaste for strong teeth and gums.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Colgate Toothpaste (150g)', 70, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Colgate Toothpaste (150g)', 70, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="LUX.png" alt="Lux Soap 100g">
      <div class="grocery-title">Lux Soap (100g)</div>
      <div class="grocery-price">Rs 90</div>
      <div class="grocery-desc">Luxury soap with floral fragrance.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Lux Soap (100g)', 90, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Lux Soap (100g)', 90, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Dettol.png" alt="Dettol Soap 100g">
      <div class="grocery-title">Dettol Soap (100g)</div>
      <div class="grocery-price">Rs 100</div>
      <div class="grocery-desc">Antibacterial soap for protection.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Dettol Soap (100g)', 100, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Dettol Soap (100g)', 100, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Screenshot (297).png" alt="Sunsilk Shampoo 200ml">
      <div class="grocery-title">Sunsilk Shampoo (200ml)</div>
      <div class="grocery-price">Rs 270</div>
      <div class="grocery-desc">Hair care shampoo for all hair types.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Sunsilk Shampoo (200ml)', 270, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Sunsilk Shampoo (200ml)', 270, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Head .png" alt="Head & Shoulders Shampoo 200ml">
      <div class="grocery-title">Head & Shoulders (200ml)</div>
      <div class="grocery-price">Rs 300</div>
      <div class="grocery-desc">Anti-dandruff shampoo for healthy scalp.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Head & Shoulders (200ml)', 300, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Head & Shoulders (200ml)', 300, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>

    <!-- Dal/Pulses -->
    <div class="grocery-item">
      <img src="Masoor Dal (1kg).png" alt="Masoor Dal 1kg">
      <div class="grocery-title">Masoor Dal (1kg)</div>
      <div class="grocery-price">Rs 200</div>
      <div class="grocery-desc">Red lentils rich in protein.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Masoor Dal (1kg)', 200, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Masoor Dal (1kg)', 200, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="s2kg.png" alt="Moong Dal 1kg">
      <div class="grocery-title">Moong Dal (1kg)</div>
      <div class="grocery-price">Rs 220</div>
      <div class="grocery-desc">Yellow split mung beans.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Moong Dal (1kg)', 220, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Moong Dal (1kg)', 220, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Cana.png" alt="Chana Dal 1kg">
      <div class="grocery-title">Chana Dal (1kg)</div>
      <div class="grocery-price">Rs 240</div>
      <div class="grocery-desc">Split Bengal gram.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Chana Dal (1kg)', 240, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Chana Dal (1kg)', 240, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="Tore.png" alt="Toor Dal 1kg">
      <div class="grocery-title">Toor Dal (1kg)</div>
      <div class="grocery-price">Rs 260</div>
      <div class="grocery-desc">Pigeon peas, staple in many dishes.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Toor Dal (1kg)', 260, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Toor Dal (1kg)', 260, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="URE.png" alt="Urad Dal 1kg">
      <div class="grocery-title">Urad Dal (1kg)</div>
      <div class="grocery-price">Rs 280</div>
      <div class="grocery-desc">Black gram, used in dal makhani.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Urad Dal (1kg)', 280, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Urad Dal (1kg)', 280, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>

    <!-- Custom Spices -->
    <div class="grocery-item">
      <img src="IMG-20250730-WA0073.jpg" alt="Curry Powder">
      <div class="grocery-title">Special Curry Powder</div>
      <div class="grocery-price">Rs 350</div>
      <div class="grocery-desc">Authentic blend of spices for perfect curries.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Special Curry Powder', 350, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Special Curry Powder', 350, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="IMG-20250730-WA0074.jpg" alt="Chaat Masala">
      <div class="grocery-title">Chaat Masala</div>
      <div class="grocery-price">Rs 300</div>
      <div class="grocery-desc">Tangy spice mix for snacks and salads.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Chaat Masala', 300, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Chaat Masala', 300, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
    
    <div class="grocery-item">
      <img src="IMG-20250730-WA0075.jpg" alt="Bombay Biryani Masala">
      <div class="grocery-title">Bombay Biryani Masala</div>
      <div class="grocery-price">Rs 400</div>
      <div class="grocery-desc">Special blend for authentic Bombay-style biryani.</div>
      <div class="quantity-controls">
        <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
        <input type="number" class="quantity-input" value="1" min="1" max="10">
        <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
      </div>
      <button class="btn" onclick="addToCart('Bombay Biryani Masala', 400, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
      <button class="btn buy-now" onclick="buyNow('Bombay Biryani Masala', 400, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
    </div>
  </div>

  <!-- Orders Page -->
  <div id="ordersPage" style="display:none;">
    <a href="#" class="back-btn" onclick="hideOrders()">
      <i class="fa-solid fa-arrow-left"></i> Back to Shopping
    </a>
    <div style="background: #fff; border-radius: 12px; box-shadow: 0 4px 18px rgba(0,0,0,0.10); padding: 30px; max-width: 800px; margin: 0 auto;">
      <h1 style="color: #0056d6; font-size: 1.8rem; margin-bottom: 24px; text-align:center;">Your Orders</h1>
      <div id="ordersList" style="margin-top:20px;"></div>
    </div>
  </div>

  <!-- Admin Page -->
  <div id="adminPage" style="display:none; max-width: 1100px; margin: 30px auto; padding: 20px;">
    <a href="#" class="back-btn" onclick="hideAdminPanel()">
      <i class="fa-solid fa-arrow-left"></i> Back to Shopping
    </a>
    <div style="background: #fff; border-radius: 12px; box-shadow: 0 4px 18px rgba(0,0,0,0.10); padding: 20px;">
      <h1 style="color: #0056d6; font-size: 1.8rem; margin-bottom: 16px;">Admin Panel</h1>
      <p style="color:#555; margin-bottom: 16px;">Add, edit, or remove products. Changes are saved to your browser (localStorage) and reflected immediately in the shop.</p>

      <h2 style="margin-top: 10px; font-size: 1.2rem;">Add New Product</h2>
      <div class="order-card" style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end;">
        <input id="adminAddName" placeholder="Name" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:4px;">
        <input id="adminAddPrice" placeholder="Price" type="number" min="0" style="width:140px; padding:10px; border:1px solid #ddd; border-radius:4px;">
        <input id="adminAddImage" placeholder="Image filename or URL" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:4px;">
        <input id="adminAddDesc" placeholder="Description" style="flex:2; padding:10px; border:1px solid #ddd; border-radius:4px;">
        <button class="btn" style="width:auto;" onclick="addNewProduct()">Add Product</button>
      </div>

      <h2 style="margin-top: 20px; font-size: 1.2rem;">Manage Products</h2>
      <div id="adminProductsList"></div>
    </div>
  </div>

  <!-- Modal for Buy Now -->
  <div class="modal-overlay" id="orderModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Complete Your Order</h2>
        <button class="close-modal" onclick="closeModal()">&times;</button>
      </div>
      <form id="orderForm">
        <input type="hidden" id="modalProductName">
        <input type="hidden" id="modalProductPrice">
        <input type="hidden" id="modalProductQuantity">
        
        <div class="form-group">
          <label for="customerName">Your Full Name</label>
          <input type="text" id="customerName" required>
        </div>
        
        <div class="form-group">
          <label for="mobile">WhatsApp Number</label>
          <input type="tel" id="mobile" placeholder="e.g. 03123456789" required>
        </div>
        
        <div class="form-group">
          <label for="location">Delivery Address</label>
          <select id="location" required>
            <option value="">Select your area</option>
            <option value="Bhagwal Awan">Bhagwal Awan</option>
            <option value="Bhindar">Bhindar</option>
            <option value="Jaurian Kalan">Jaurian Kalan</option>
            <option value="Sukhnian">Sukhnian</option>
            <option value="Other">Other (Specify in Notes)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="deliveryTime">Delivery Time</label>
          <select id="deliveryTime" required>
            <option value="10 minutes">10 minutes (Express)</option>
            <option value="20 minutes">20 minutes (Standard)</option>
            <option value="30 minutes">30 minutes (Economy)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="paymentMethod">Payment Method</label>
          <select id="paymentMethod" required>
            <option value="Cash on Delivery">Cash on Delivery</option>
            <option value="Easypaisa">Easypaisa</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="notes">Special Instructions (Optional)</label>
          <input type="text" id="notes">
        </div>
        
        <div id="orderSummary" style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;"></div>
        
        <button type="submit" class="submit-btn">Place Order</button>
      </form>
    </div>
  </div>

  <!-- Alert Modal -->
  <div class="alert-overlay" id="alertModal">
    <div class="alert-box">
      <h3 class="alert-title" id="alertTitle">Notice</h3>
      <div class="alert-message" id="alertMessage"></div>
      <button class="alert-btn" onclick="closeAlert()">OK</button>
      <div style="clear: both;"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>Get to Know Us</h3>
        <ul>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Careers</a></li>
          <li><a href="#">Press Releases</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h3>Connect with Us</h3>
        <ul>
          <li><a href="https://www.youtube.com/@Malik-Zaid-Awan" target="_blank"><i class="fab fa-youtube"></i> YouTube</a></li>
          <li><a href="https://wa.me/923365558298" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
          <li><a href="#" onclick="showContact()"><i class="fa fa-phone"></i> Contact Us</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h3>Make Money with Us</h3>
        <ul>
          <li><a href="#">Sell on Buy More Now</a></li>
          <li><a href="#">Become an Affiliate</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h3>Let Us Help You</h3>
        <ul>
          <li><a href="#">Your Account</a></li>
          <li><a href="#" onclick="showOrders()">Your Orders</a></li>
          <li><a href="#">Help</a></li>
        </ul>
      </div>
    </div>
    
    <div class="copyright">
      © 2025 Buy More Now. All rights reserved.
    </div>
  </footer>

  <script>
    // Business Configuration
    const BUSINESS = {
      name: "Buy More Now",
      email: "allahmafkar369@gmail.com",
      whatsapp: "923365558298",
      delivery: {
        freeAreas: ["bhagwal awan", "bhindar", "jaurian kalan", "sukhnian"],
        standardFee: 50,
        otherFee: 100
      },
      paymentMethods: {
        "Cash on Delivery": "Cash on Delivery",
        "Easypaisa": "Easypaisa"
      }
    };

    // Centralized product catalog
    const PRODUCTS = [
      {name:'Sugar (2kg)', price:220, image:'Su2kg.png', description:'Fine granulated sugar for tea, desserts, and more.'},
      {name:'Sugar (5kg)', price:520, image:'su5kg.png', description:'Bulk pack for large families and events.'},
      {name:'Surf Excel (500g)', price:180, image:'s500g.png', description:'Powerful stain removal for everyday laundry.'},
      {name:'Surf Excel (2kg)', price:650, image:'s2kg.png', description:'Economical pack for tough stains and bulk washing.'},
      {name:'Ariel (1kg)', price:200, image:'A1kg.png', description:'Brightens clothes and removes tough stains.'},
      {name:'Ariel (2kg)', price:650, image:'A2kg.png', description:'Large pack for family laundry needs.'},
      {name:'Cooking Oil (1L)', price:320, image:'Kisan.png', description:'Refined sunflower oil for healthy cooking.'},
      {name:'Salt (1kg)', price:70, image:'Salt.png', description:'Iodized salt for everyday use.'},
      {name:'Red Chilli Powder (100g)', price:40, image:'Red CHill.png', description:'Spicy red chilli powder for flavor and heat.'},
      {name:'Turmeric Powder (100g)', price:50, image:'brea.png', description:'Pure turmeric powder for cooking and health.'},
      {name:'Coriander Powder (100g)', price:45, image:'Cumin Powder (100g).png', description:'Aromatic coriander powder for flavor.'},
      {name:'Garam Masala (200g)', price:120, image:'Garam Masala.png', description:'Aromatic blend of ground spices.'},
      {name:'Cumin Powder (100g)', price:55, image:'Cumin Powder (100g).png', description:'Ground cumin for authentic flavor.'},
      {name:'Toothpaste (150g)', price:60, image:'Col.png', description:'Refreshing toothpaste for strong teeth and gums.'},
      {name:'Lux Soap (100g)', price:80, image:'LUX.png', description:'Luxury soap with floral fragrance.'},
      {name:'Dettol Soap (100g)', price:90, image:'Dettol.png', description:'Antibacterial soap for protection.'},
      {name:'Sunsilk Shampoo (200ml)', price:250, image:'Screenshot (297).png', description:'Hair care shampoo for all hair types.'},
      {name:'Head & Shoulders (200ml)', price:280, image:'Head .png', description:'Anti-dandruff shampoo for healthy scalp.'},
      {name:'Chana Dal (1kg)', price:220, image:'Cana.png', description:'Split Bengal gram.'},
      {name:'Toor Dal (1kg)', price:240, image:'Tore.png', description:'Pigeon peas, staple in many dishes.'},
      {name:'Urad Dal (1kg)', price:260, image:'URE.png', description:'Black gram, used in dal makhani.'},
      {name:'Cumin Powder', price:300, image:'IMG-20250730-WA0073.jpg', description:'Your custom photo description here.'},
      {name:'Chaat Masala', price:300, image:'IMG-20250730-WA0074.jpg', description:'Your custom photo description here.'},
      {name:'Bombay Biryani', price:300, image:'IMG-20250730-WA0075.jpg', description:'Your custom photo description here.'},
      {name:'sevaiyan', price:100, image:'IMG-20250730-WA0005.jpg', description:'Your custom photo description here.'},
      {name:'sevaiyan', price:100, image:'IMG-20250730-WA0006.jpg', description:'Your custom photo description here.'},
      {name:'Pasta', price:200, image:'IMG-20250730-WA0007.jpg', description:'Your custom photo description here.'},
      {name:'Pasta', price:200, image:'IMG-20250730-WA0008.jpg', description:'Your custom photo description here.'},
      {name:'Fruit chart shan', price:100, image:'IMG-20250730-WA0009.jpg', description:'Your custom photo description here.'},
      {name:'Penne Macaroni', price:300, image:'IMG-20250730-WA0010.jpg', description:'Your custom photo description here.'},
      {name:'Fruit Chart National', price:150, image:'IMG-20250730-WA0011.jpg', description:'Your custom photo description here.'},
      {name:'Achar Gosht', price:200, image:'IMG-20250730-WA0012.jpg', description:'Your custom photo description here.'},
      {name:'Karahi', price:230, image:'IMG-20250730-WA0013.jpg', description:'Your custom photo description here.'},
      {name:'Quorma', price:250, image:'IMG-20250730-WA0014.jpg', description:'Your custom photo description here.'},
      {name:'mehran haleem mix easy cook', price:345, image:'IMG-20250730-WA0015.jpg', description:'Your custom photo description here.'},
      {name:'easy cook Haleem mix Shan', price:350, image:'IMG-20250730-WA0016.jpg', description:'Your custom photo description here.'},
      {name:'biryani masala national', price:130, image:'IMG-20250730-WA0017.jpg', description:'Your custom photo description here.'},
      {name:'Haleem mix national', price:150, image:'IMG-20250730-WA0018.jpg', description:'Your custom photo description here.'},
      {name:'Korma ', price:120, image:'IMG-20250730-WA0019.jpg', description:'Your custom photo description here.'},
      {name:'Shan Karahi masala', price:120, image:'IMG-20250730-WA0020.jpg', description:'Your custom photo description here.'},
      {name:'Shan Dawat Pack masala', price:150, image:'IMG-20250730-WA0021.jpg', description:'Your custom photo description here.'},
      {name:'Shan Achari Gosht masala', price:120, image:'IMG-20250730-WA0022.jpg', description:'Your custom photo description here.'},
      {name:'National Karahi masala', price:150, image:'IMG-20250730-WA0023.jpg', description:'Your custom photo description here.'},
      {name:'National Quorma masala', price:200, image:'IMG-20250730-WA0024.jpg', description:'Your custom photo description here.'},
      {name:'National Achar Gosht', price:150, image:'IMG-20250730-WA0025.jpg', description:'Your custom photo description here.'},
      {name:'Spaghetti pack', price:250, image:'IMG-20250730-WA0026.jpg', description:'Your custom photo description here.'},
      {name:'National Biryani masala', price:130, image:'IMG-20250730-WA0027.jpg', description:'Your custom photo description here.'},
      {name:'EveryDay Tea Whitener', price:500, image:'IMG-20250730-WA0028.jpg', description:'Your custom photo description here.'},
      {name:'Pampers Baby-Dry Pants', price:350, image:'IMG-20250730-WA0029.jpg', description:'Your custom photo description here.'},
      {name:'Nestlé Nido FortiGrow (Yellow pack)', price:650, image:'IMG-20250730-WA0030.jpg', description:'Your custom photo description here.'},
      {name:'Laziza Kheer Mix', price:250, image:'IMG-20250730-WA0031.jpg', description:'Your custom photo description here.'},
      {name:'National Daal Masala', price:250, image:'IMG-20250730-WA0032.jpg', description:'Your custom photo description here.'},
      {name:'National Murghi Masala', price:150, image:'IMG-20250730-WA0034.jpg', description:'Your custom photo description here.'},
      {name:'National Meat Tenderizer', price:150, image:'IMG-20250730-WA0035.jpg', description:'Your custom photo description here.'},
      {name:'National Chicken Broast Masala', price:130, image:'IMG-20250730-WA0036.jpg', description:'Your custom photo description here.'},
      {name:'National Kofta Masala', price:120, image:'IMG-20250730-WA0037.jpg', description:'Your custom photo description here.'},
      {name:'National Fried Chops Masala', price:120, image:'IMG-20250730-WA0038.jpg', description:'Your custom photo description here.'},
      {name:'National Fried Fish Masala', price:130, image:'IMG-20250730-WA0039.jpg', description:'Your custom photo description here.'},
      {name:'chicken tandoori', price:120, image:'IMG-20250730-WA0040.jpg', description:'Your custom photo description here.'},
      {name:'Sindhi Biryani Mehran', price:120, image:'IMG-20250730-WA0041.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka Mehran', price:120, image:'IMG-20250730-WA0042.jpg', description:'Your custom photo description here.'},
      {name:'Mehran biryani', price:120, image:'IMG-20250730-WA0043.jpg', description:'Your custom photo description here.'},
      {name:'salan masala Mehran', price:130, image:'IMG-20250730-WA0045.jpg', description:'Your custom photo description here.'},
      {name:'Shami Kabab Mahran', price:150, image:'IMG-20250730-WA0047.jpg', description:'Your custom photo description here.'},
      {name:'chicken masala Shan', price:140, image:'IMG-20250730-WA0048.jpg', description:'Your custom photo description here.'},
      {name:'Mehran biryani', price:110, image:'IMG-20250730-WA0049.jpg', description:'Your custom photo description here.'},
      {name:'Karahi Gosht Mehran', price:0, image:'IMG-20250730-WA0050.jpg', description:'Your custom photo description here.'},
      {name:'vegetable masala Shan', price:0, image:'IMG-20250730-WA0051.jpg', description:'Your custom photo description here.'},
      {name:'Shan Murgh Cholay Masala 50 gm', price:0, image:'IMG-20250730-WA0052.jpg', description:'Your custom photo description here.'},
      {name:'Haleem Shan 50gm', price:0, image:'IMG-20250730-WA0053.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka Shan 50 gm', price:0, image:'IMG-20250730-WA0054.jpg', description:'Your custom photo description here.'},
      {name:'Shami Kabab Shan 50 gm', price:0, image:'IMG-20250730-WA0055.jpg', description:'Your custom photo description here.'},
      {name:'Karahi masala shan 50gm', price:0, image:'IMG-20250730-WA0056.jpg', description:'Your custom photo description here.'},
      {name:'Achar Gosht masala National 50 gm', price:0, image:'IMG-20250730-WA0057.jpg', description:'Your custom photo description here.'},
      {name:'Karahi masala National 50 gm', price:0, image:'IMG-20250730-WA0058.jpg', description:'Your custom photo description here.'},
      {name:'PAYA National 50gm', price:0, image:'IMG-20250730-WA0059.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka National 50 gm', price:0, image:'IMG-20250730-WA0060.jpg', description:'Your custom photo description here.'},
      {name:'Chicken Jalfrezi National Masala 50 gm', price:0, image:'IMG-20250730-WA0061.jpg', description:'Your custom photo description here.'},
      {name:'seekh kabab National 50gm ', price:0, image:'IMG-20250730-WA0062.jpg', description:'Your custom photo description here.'},
      {name:'Pulao National 50 gm', price:0, image:'IMG-20250730-WA0063.jpg', description:'Your custom photo description here.'},
      {name:'biryani National 50 gm', price:0, image:'IMG-20250730-WA0064.jpg', description:'Your custom photo description here.'},
      {name:'Kheer mix shan 50 gm', price:0, image:'IMG-20250730-WA0065.jpg', description:'Your custom photo description here.'},
      {name:'korma masala shan 50 gm', price:120, image:'IMG-20250730-WA0066.jpg', description:'Your custom photo description here.'},
      {name:'chaat masala National 50 gm', price:0, image:'IMG-20250730-WA0067.jpg', description:'Your custom photo description here.'},
      {name:'chaat masala Mehran 50 gm', price:0, image:'IMG-20250730-WA0068.jpg', description:'Your custom photo description here.'},
      {name:'Karahi - Shan 50 gm', price:0, image:'IMG-20250730-WA0069.jpg', description:'Your custom photo description here.'},
      {name:'cumin power mehran 50 gm', price:0, image:'IMG-20250730-WA0070.jpg', description:'Your custom photo description here.'},
      {name:'Biryani masala shan 50 gm ', price:0, image:'IMG-20250730-WA0071.jpg', description:'Your custom photo description here.'},
      {name:'pulao National 50 gm ', price:0, image:'IMG-20250730-WA0072.jpg', description:'Your custom photo description here.'},
      {name:'palak gosht 50gm', price:0, image:'IMG-20250730-WA0080.jpg', description:'Your custom photo description here.'},
      {name:'Black Chana 500g', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.36_9192c310.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 9mm 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.39_804cf29f.jpg', description:'Your custom photo description here.'},
      {name:'Fauji Barley Porridge', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.47_7a8eba77.jpg', description:'Your custom photo description here.'},
      {name:'Black Chana 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.57_33b68515.jpg', description:'Your custom photo description here.'},
      {name:'White Chana small 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.10_0b455a4c.jpg', description:'Your custom photo description here.'},
      {name:'Sunlight 2 in 1', price:200, image:'WhatsApp Image 2025-07-31 at 10.30.18_dca7e61d.jpg', description:'Your custom photo description here.'},
      {name:'elaichi cardamom 16gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.20_41b44570.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 8mm 1kg ', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.25_8fc76a1d.jpg', description:'Your custom photo description here.'},
      {name:'Masoor desi 500g ', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.36_07d9c6b8.jpg', description:'Your custom photo description here.'},
      {name:'clove 50g', price:0, image:'WhatsApp Image 2025-07-31 at 10.39.18_7a95579e.jpg', description:'Your custom photo description here.'},
      {name:'mirsi 100gm ', price:0, image:'WhatsApp Image 2025-07-31 at 10.39.21_903da271.jpg', description:'Your custom photo description here.'},
      {name:'moong washed dal 500 gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.13_afbb796f.jpg', description:'Your custom photo description here.'},
      {name:'Express Power (Detergent) 2kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.13_b36cc020.jpg', description:'Your custom photo description here.'},
      {name:'Masoor whole 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.14_b55e540d.jpg', description:'Your custom photo description here.'},
      {name:'Rafhan Cornflour', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.15_63c83d2c.jpg', description:'Your custom photo description here.'},
      {name:'basin special 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.15_ddda7fd9.jpg', description:'Your custom photo description here.'},
      {name:'lobia China vip 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.16_3423f241.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.16_7d399f31.jpg', description:'Your custom photo description here.'},
      {name:'besin special 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.17_0d99efa3.jpg', description:'Your custom photo description here.'},
      {name:'Moong dal shell 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.18_1da2a086.jpg', description:'Your custom photo description here.'},
      {name:'lobia desi red 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.18_909d574a.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 9mm 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.19_977c7d3b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.20_2ceede94.jpg', description:'Your custom photo description here.'},
      {name:'Mash washed 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.20_dd75330d.jpg', description:'Your custom photo description here.'},
      {name:'shakkar desi 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.21_29b69697.jpg', description:'Your custom photo description here.'},
      {name:'Masoor Dal (500gm)', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.22_997747fd.jpg', description:'Your custom photo description here.'},
      {name:'Bonus Tristar (1 kg)', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.23_17c155a0.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.24_bc09e771.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.25_b113cd06.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.26_d364b894.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.27_dbd7b54f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.28_7dca4d39.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.28_8af3917b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.29_776c6934.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.29_99d7a109.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.30_9ffaaa82.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.30_c26fd86a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.31_569a4b3b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.31_d3c4b1fc.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.32_ca61906b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.33_a9f5dfe6.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.33_d811d05b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.34_d395f362.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.35_91f69f0e.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.36_63ff664f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.37_a84aa349.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.39_ffe735e7.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.40_24a97057.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.45_1272891b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.49_f0e300c2.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.03_2db1a1a8.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.04_61da3892.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.04_708c4e41.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.05_42e78556.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.05_9cc6098e.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.07_4ccbf0f0.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.07_5d5ca445.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.09_6bbf0260.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.10_198d5c63.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.10_b714ddc9.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.15_3f81ccfb.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.19_7de5f523.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.20_9b3bcc9f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.20_c7a43888.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.21_a477441a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.22_12d1665a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.23_9f0e1220.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.23_f3fef40c.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.24_b8155dbf.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.24_db0cb39c.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.25_c7b9cf43.jpg', description:'Your custom photo description here.'}
    ];

    // App State
    let cartItems = [];
    let orders = [];
    let isLoggedIn = false;
    let isAdmin = false;
    let currentUser = null;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      updateCartCount();
      setupSearch();
      loadProductsFromStorage();
      refreshGallery();
      
      // Check for existing orders in localStorage
      loadOrders();
      
      // Setup order form submission
      document.getElementById('orderForm').addEventListener('submit', function(e) {
        e.preventDefault();
        processOrderFromModal();
      });

      // Close modals on overlay click
      document.getElementById('orderModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
      });
      document.getElementById('alertModal').addEventListener('click', function(e) {
        if (e.target === this) closeAlert();
      });

      // Close modals with ESC key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeModal();
          closeAlert();
        }
      });

      // Spin the brand/logo image(s) once on page load
      try {
        document.querySelectorAll('.logo-img').forEach(function(el) {
          if (el && el.animate) {
            el.animate([
              { transform: 'rotate(0deg)' },
              { transform: 'rotate(360deg)' }
            ], { duration: 900, easing: 'ease' });
          }
        });
      } catch (e) { /* no-op */ }
    });

    function setupSearch() {
      document.querySelector('.search-input').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') handleSearch();
      });
    }

    function handleSearch() {
      const searchTerm = document.querySelector('.search-input').value.trim().toLowerCase();
      if (!searchTerm) {
        showAlert('Please enter a search term');
        return;
      }
      
      const products = [
        { name: "Premium Sugar (2kg)", keywords: ["sugar", "2kg", "sugar 2kg"] },
        { name: "Premium Sugar (5kg)", keywords: ["sugar", "5kg", "sugar 5kg"] },
        { name: "Surf Excel (500g)", keywords: ["surf excel", "500g", "detergent"] },
        { name: "Surf Excel (2kg)", keywords: ["surf excel", "2kg", "detergent"] },
        { name: "Ariel (1kg)", keywords: ["ariel", "1kg", "detergent"] },
        { name: "Ariel (2kg)", keywords: ["ariel", "2kg", "detergent"] },
        { name: "Kisan Cooking Oil (1L)", keywords: ["cooking oil", "oil", "1l"] },
        { name: "Iodized Salt (1kg)", keywords: ["salt", "1kg"] },
        { name: "Red Chilli Powder (100g)", keywords: ["red chilli", "chilli powder", "spice"] },
        { name: "Turmeric Powder (100g)", keywords: ["turmeric", "haldi"] },
        { name: "Coriander Powder (100g)", keywords: ["coriander", "dhania"] },
        { name: "Garam Masala (100g)", keywords: ["garam masala", "spice mix"] },
        { name: "Cumin Powder (100g)", keywords: ["cumin", "jeera"] },
        { name: "Colgate Toothpaste (150g)", keywords: ["toothpaste", "colgate"] },
        { name: "Lux Soap (100g)", keywords: ["lux", "soap"] },
        { name: "Dettol Soap (100g)", keywords: ["dettol", "soap"] },
        { name: "Sunsilk Shampoo (200ml)", keywords: ["sunsilk", "shampoo"] },
        { name: "Head & Shoulders Shampoo (200ml)", keywords: ["head shoulders", "shampoo"] },
        { name: "Masoor Dal (1kg)", keywords: ["masoor", "dal", "lentils"] },
        { name: "Moong Dal (1kg)", keywords: ["moong", "dal", "lentils"] },
        { name: "Chana Dal (1kg)", keywords: ["chana", "dal", "lentils"] },
        { name: "Toor Dal (1kg)", keywords: ["toor", "dal", "lentils"] },
        { name: "Urad Dal (1kg)", keywords: ["urad", "dal", "lentils"] },
              {name:'Sugar (2kg)', price:220, image:'Su2kg.png', description:'Fine granulated sugar for tea, desserts, and more.'},
      {name:'Sugar (5kg)', price:520, image:'su5kg.png', description:'Bulk pack for large families and events.'},
      {name:'Surf Excel (500g)', price:180, image:'s500g.png', description:'Powerful stain removal for everyday laundry.'},
      {name:'Surf Excel (2kg)', price:650, image:'s2kg.png', description:'Economical pack for tough stains and bulk washing.'},
      {name:'Ariel (1kg)', price:200, image:'A1kg.png', description:'Brightens clothes and removes tough stains.'},
      {name:'Ariel (2kg)', price:650, image:'A2kg.png', description:'Large pack for family laundry needs.'},
      {name:'Cooking Oil (1L)', price:320, image:'Kisan.png', description:'Refined sunflower oil for healthy cooking.'},
      {name:'Salt (1kg)', price:70, image:'Salt.png', description:'Iodized salt for everyday use.'},
      {name:'Red Chilli Powder (100g)', price:40, image:'Red CHill.png', description:'Spicy red chilli powder for flavor and heat.'},
      {name:'Turmeric Powder (100g)', price:50, image:'brea.png', description:'Pure turmeric powder for cooking and health.'},
      {name:'Coriander Powder (100g)', price:45, image:'Cumin Powder (100g).png', description:'Aromatic coriander powder for flavor.'},
      {name:'Garam Masala (200g)', price:120, image:'Garam Masala.png', description:'Aromatic blend of ground spices.'},
      {name:'Cumin Powder (100g)', price:55, image:'Cumin Powder (100g).png', description:'Ground cumin for authentic flavor.'},
      {name:'Toothpaste (150g)', price:60, image:'Col.png', description:'Refreshing toothpaste for strong teeth and gums.'},
      {name:'Lux Soap (100g)', price:80, image:'LUX.png', description:'Luxury soap with floral fragrance.'},
      {name:'Dettol Soap (100g)', price:90, image:'Dettol.png', description:'Antibacterial soap for protection.'},
      {name:'Sunsilk Shampoo (200ml)', price:250, image:'Screenshot (297).png', description:'Hair care shampoo for all hair types.'},
      {name:'Head & Shoulders (200ml)', price:280, image:'Head .png', description:'Anti-dandruff shampoo for healthy scalp.'},
      {name:'Chana Dal (1kg)', price:220, image:'Cana.png', description:'Split Bengal gram.'},
      {name:'Toor Dal (1kg)', price:240, image:'Tore.png', description:'Pigeon peas, staple in many dishes.'},
      {name:'Urad Dal (1kg)', price:260, image:'URE.png', description:'Black gram, used in dal makhani.'},
      {name:'Cumin Powder', price:300, image:'IMG-20250730-WA0073.jpg', description:'Your custom photo description here.'},
      {name:'Chaat Masala', price:300, image:'IMG-20250730-WA0074.jpg', description:'Your custom photo description here.'},
      {name:'Bombay Biryani', price:300, image:'IMG-20250730-WA0075.jpg', description:'Your custom photo description here.'},
      {name:'sevaiyan', price:100, image:'IMG-20250730-WA0005.jpg', description:'Your custom photo description here.'},
      {name:'sevaiyan', price:100, image:'IMG-20250730-WA0006.jpg', description:'Your custom photo description here.'},
      {name:'Pasta', price:200, image:'IMG-20250730-WA0007.jpg', description:'Your custom photo description here.'},
      {name:'Pasta', price:200, image:'IMG-20250730-WA0008.jpg', description:'Your custom photo description here.'},
      {name:'Fruit chart shan', price:100, image:'IMG-20250730-WA0009.jpg', description:'Your custom photo description here.'},
      {name:'Penne Macaroni', price:300, image:'IMG-20250730-WA0010.jpg', description:'Your custom photo description here.'},
      {name:'Fruit Chart National', price:150, image:'IMG-20250730-WA0011.jpg', description:'Your custom photo description here.'},
      {name:'Achar Gosht', price:200, image:'IMG-20250730-WA0012.jpg', description:'Your custom photo description here.'},
      {name:'Karahi', price:230, image:'IMG-20250730-WA0013.jpg', description:'Your custom photo description here.'},
      {name:'Quorma', price:250, image:'IMG-20250730-WA0014.jpg', description:'Your custom photo description here.'},
      {name:'mehran haleem mix easy cook', price:345, image:'IMG-20250730-WA0015.jpg', description:'Your custom photo description here.'},
      {name:'easy cook Haleem mix Shan', price:350, image:'IMG-20250730-WA0016.jpg', description:'Your custom photo description here.'},
      {name:'biryani masala national', price:130, image:'IMG-20250730-WA0017.jpg', description:'Your custom photo description here.'},
      {name:'Haleem mix national', price:150, image:'IMG-20250730-WA0018.jpg', description:'Your custom photo description here.'},
      {name:'Korma ', price:120, image:'IMG-20250730-WA0019.jpg', description:'Your custom photo description here.'},
      {name:'Shan Karahi masala', price:120, image:'IMG-20250730-WA0020.jpg', description:'Your custom photo description here.'},
      {name:'Shan Dawat Pack masala', price:150, image:'IMG-20250730-WA0021.jpg', description:'Your custom photo description here.'},
      {name:'Shan Achari Gosht masala', price:120, image:'IMG-20250730-WA0022.jpg', description:'Your custom photo description here.'},
      {name:'National Karahi masala', price:150, image:'IMG-20250730-WA0023.jpg', description:'Your custom photo description here.'},
      {name:'National Quorma masala', price:200, image:'IMG-20250730-WA0024.jpg', description:'Your custom photo description here.'},
      {name:'National Achar Gosht', price:150, image:'IMG-20250730-WA0025.jpg', description:'Your custom photo description here.'},
      {name:'Spaghetti pack', price:250, image:'IMG-20250730-WA0026.jpg', description:'Your custom photo description here.'},
      {name:'National Biryani masala', price:130, image:'IMG-20250730-WA0027.jpg', description:'Your custom photo description here.'},
      {name:'EveryDay Tea Whitener', price:500, image:'IMG-20250730-WA0028.jpg', description:'Your custom photo description here.'},
      {name:'Pampers Baby-Dry Pants', price:350, image:'IMG-20250730-WA0029.jpg', description:'Your custom photo description here.'},
      {name:'Nestlé Nido FortiGrow (Yellow pack)', price:650, image:'IMG-20250730-WA0030.jpg', description:'Your custom photo description here.'},
      {name:'Laziza Kheer Mix', price:250, image:'IMG-20250730-WA0031.jpg', description:'Your custom photo description here.'},
      {name:'National Daal Masala', price:250, image:'IMG-20250730-WA0032.jpg', description:'Your custom photo description here.'},
      {name:'National Murghi Masala', price:150, image:'IMG-20250730-WA0034.jpg', description:'Your custom photo description here.'},
      {name:'National Meat Tenderizer', price:150, image:'IMG-20250730-WA0035.jpg', description:'Your custom photo description here.'},
      {name:'National Chicken Broast Masala', price:130, image:'IMG-20250730-WA0036.jpg', description:'Your custom photo description here.'},
      {name:'National Kofta Masala', price:120, image:'IMG-20250730-WA0037.jpg', description:'Your custom photo description here.'},
      {name:'National Fried Chops Masala', price:120, image:'IMG-20250730-WA0038.jpg', description:'Your custom photo description here.'},
      {name:'National Fried Fish Masala', price:130, image:'IMG-20250730-WA0039.jpg', description:'Your custom photo description here.'},
      {name:'chicken tandoori', price:120, image:'IMG-20250730-WA0040.jpg', description:'Your custom photo description here.'},
      {name:'Sindhi Biryani Mehran', price:120, image:'IMG-20250730-WA0041.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka Mehran', price:120, image:'IMG-20250730-WA0042.jpg', description:'Your custom photo description here.'},
      {name:'Mehran biryani', price:120, image:'IMG-20250730-WA0043.jpg', description:'Your custom photo description here.'},
      {name:'salan masala Mehran', price:130, image:'IMG-20250730-WA0045.jpg', description:'Your custom photo description here.'},
      {name:'Shami Kabab Mahran', price:150, image:'IMG-20250730-WA0047.jpg', description:'Your custom photo description here.'},
      {name:'chicken masala Shan', price:140, image:'IMG-20250730-WA0048.jpg', description:'Your custom photo description here.'},
      {name:'Mehran biryani', price:110, image:'IMG-20250730-WA0049.jpg', description:'Your custom photo description here.'},
      {name:'Karahi Gosht Mehran', price:0, image:'IMG-20250730-WA0050.jpg', description:'Your custom photo description here.'},
      {name:'vegetable masala Shan', price:0, image:'IMG-20250730-WA0051.jpg', description:'Your custom photo description here.'},
      {name:'Shan Murgh Cholay Masala 50 gm', price:0, image:'IMG-20250730-WA0052.jpg', description:'Your custom photo description here.'},
      {name:'Haleem Shan 50gm', price:0, image:'IMG-20250730-WA0053.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka Shan 50 gm', price:0, image:'IMG-20250730-WA0054.jpg', description:'Your custom photo description here.'},
      {name:'Shami Kabab Shan 50 gm', price:0, image:'IMG-20250730-WA0055.jpg', description:'Your custom photo description here.'},
      {name:'Karahi masala shan 50gm', price:0, image:'IMG-20250730-WA0056.jpg', description:'Your custom photo description here.'},
      {name:'Achar  Gosht masala National 50 gm', price:0, image:'IMG-20250730-WA0057.jpg', description:'Your custom photo description here.'},
      {name:'Karahi masala National 50 gm', price:0, image:'IMG-20250730-WA0058.jpg', description:'Your custom photo description here.'},
      {name:'PAYA National 50gm', price:0, image:'IMG-20250730-WA0059.jpg', description:'Your custom photo description here.'},
      {name:'chicken tikka National 50 gm', price:0, image:'IMG-20250730-WA0060.jpg', description:'Your custom photo description here.'},
      {name:'Chicken Jalfrezi National Masala 50 gm', price:0, image:'IMG-20250730-WA0061.jpg', description:'Your custom photo description here.'},
      {name:'seekh kabab National 50gm ', price:0, image:'IMG-20250730-WA0062.jpg', description:'Your custom photo description here.'},
      {name:'Pulao National 50 gm', price:0, image:'IMG-20250730-WA0063.jpg', description:'Your custom photo description here.'},
      {name:'biryani National 50 gm', price:0, image:'IMG-20250730-WA0064.jpg', description:'Your custom photo description here.'},
      {name:'Kheer mix shan 50 gm', price:0, image:'IMG-20250730-WA0065.jpg', description:'Your custom photo description here.'},
      {name:'korma masala shan 50 gm', price:120, image:'IMG-20250730-WA0066.jpg', description:'Your custom photo description here.'},
      {name:'chaat masala National 50 gm', price:0, image:'IMG-20250730-WA0067.jpg', description:'Your custom photo description here.'},
      {name:'chaat masala Mehran 50 gm', price:0, image:'IMG-20250730-WA0068.jpg', description:'Your custom photo description here.'},
      {name:'Karahi - Shan 50 gm', price:0, image:'IMG-20250730-WA0069.jpg', description:'Your custom photo description here.'},
      {name:'cumin power mehran 50 gm', price:0, image:'IMG-20250730-WA0070.jpg', description:'Your custom photo description here.'},
      {name:'Biryani masala shan 50 gm ', price:0, image:'IMG-20250730-WA0071.jpg', description:'Your custom photo description here.'},
      {name:'pulao National 50 gm ', price:0, image:'IMG-20250730-WA0072.jpg', description:'Your custom photo description here.'},
      {name:'palak gosht 50gm', price:0, image:'IMG-20250730-WA0080.jpg', description:'Your custom photo description here.'},
      {name:'Black Chana 500g', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.36_9192c310.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 9mm 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.39_804cf29f.jpg', description:'Your custom photo description here.'},
      {name:'Fauji Barley Porridge', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.47_7a8eba77.jpg', description:'Your custom photo description here.'},
      {name:'Black Chana 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.29.57_33b68515.jpg', description:'Your custom photo description here.'},
      {name:'White Chana small 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.10_0b455a4c.jpg', description:'Your custom photo description here.'},
      {name:'Sunlight 2 in 1', price:200, image:'WhatsApp Image 2025-07-31 at 10.30.18_dca7e61d.jpg', description:'Your custom photo description here.'},
      {name:'elaichi cardamom 16gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.20_41b44570.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 8mm 1kg ', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.25_8fc76a1d.jpg', description:'Your custom photo description here.'},
      {name:'Masoor desi 500g ', price:0, image:'WhatsApp Image 2025-07-31 at 10.30.36_07d9c6b8.jpg', description:'Your custom photo description here.'},
      {name:'clove 50g', price:0, image:'WhatsApp Image 2025-07-31 at 10.39.18_7a95579e.jpg', description:'Your custom photo description here.'},
      {name:'mirsi 100gm ', price:0, image:'WhatsApp Image 2025-07-31 at 10.39.21_903da271.jpg', description:'Your custom photo description here.'},
      {name:'moong washed dal 500 gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.13_afbb796f.jpg', description:'Your custom photo description here.'},
      {name:'Express Power (Detergent) 2kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.13_b36cc020.jpg', description:'Your custom photo description here.'},
      {name:'Masoor whole 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.14_b55e540d.jpg', description:'Your custom photo description here.'},
      {name:'Rafhan Cornflour', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.15_63c83d2c.jpg', description:'Your custom photo description here.'},
      {name:'basin special 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.15_ddda7fd9.jpg', description:'Your custom photo description here.'},
      {name:'lobia China vip 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.16_3423f241.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.16_7d399f31.jpg', description:'Your custom photo description here.'},
      {name:'besin special 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.17_0d99efa3.jpg', description:'Your custom photo description here.'},
      {name:'Moong dal shell 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.18_1da2a086.jpg', description:'Your custom photo description here.'},
      {name:'lobia desi red 1kg', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.18_909d574a.jpg', description:'Your custom photo description here.'},
      {name:'White Chana 9mm 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.19_977c7d3b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.20_2ceede94.jpg', description:'Your custom photo description here.'},
      {name:'Mash washed 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.20_dd75330d.jpg', description:'Your custom photo description here.'},
      {name:'shakkar desi 500gm', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.21_29b69697.jpg', description:'Your custom photo description here.'},
      {name:'Masoor Dal (500gm)', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.22_997747fd.jpg', description:'Your custom photo description here.'},
      {name:'Bonus Tristar (1 kg)', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.23_17c155a0.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.24_bc09e771.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.25_b113cd06.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.26_d364b894.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.27_dbd7b54f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.28_7dca4d39.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.28_8af3917b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.29_776c6934.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.29_99d7a109.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.30_9ffaaa82.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.30_c26fd86a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.31_569a4b3b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.31_d3c4b1fc.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.32_ca61906b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.33_a9f5dfe6.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.33_d811d05b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.34_d395f362.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.35_91f69f0e.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.36_63ff664f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.37_a84aa349.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.39_ffe735e7.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.40_24a97057.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.45_1272891b.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.40.49_f0e300c2.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.03_2db1a1a8.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.04_61da3892.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.04_708c4e41.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.05_42e78556.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.05_9cc6098e.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.07_4ccbf0f0.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.07_5d5ca445.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.09_6bbf0260.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.10_198d5c63.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.10_b714ddc9.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.15_3f81ccfb.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.19_7de5f523.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.20_9b3bcc9f.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.20_c7a43888.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.21_a477441a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.22_12d1665a.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.23_9f0e1220.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.23_f3fef40c.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.24_b8155dbf.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.24_db0cb39c.jpg', description:'Your custom photo description here.'},
      {name:'New Product', price:0, image:'WhatsApp Image 2025-07-31 at 10.41.25_c7b9cf43.jpg', description:'Your custom photo description here.'}
      ];
      
      const foundProducts = products.filter(product => 
        product.keywords.some(keyword => 
          keyword.toLowerCase().includes(searchTerm) || 
          searchTerm.includes(keyword.toLowerCase())
        )
      );
      
      if (foundProducts.length > 0) {
        const productNames = foundProducts.map(p => p.name).join(", ");
        showAlert(`Found products matching your search: ${productNames}`);
      } else {
        showAlert('No products found matching your search');
      }
    }

    function updateQuantity(btn, change) {
      const quantityInput = btn.parentElement.querySelector('.quantity-input');
      let newValue = parseInt(quantityInput.value) + change;
      if (newValue < 1) newValue = 1;
      if (newValue > 10) newValue = 10;
      quantityInput.value = newValue;
    }

    function addToCart(name, price, quantity = 1) {
      const existingItem = cartItems.find(item => item.name === name);
      if (existingItem) {
        existingItem.quantity += parseInt(quantity);
        existingItem.totalPrice = existingItem.quantity * price;
      } else {
        cartItems.push({
          name,
          price,
          quantity: parseInt(quantity),
          totalPrice: price * quantity
        });
      }
      updateCartCount();
      showAlert(`${quantity} ${name} added to your cart!`);
    }

    function buyNow(name, price, quantity = 1) {
      if (!isLoggedIn) {
        showAlert('Please sign in to complete your purchase', signIn);
        return;
      }
      
      // Set the product details in the modal
      document.getElementById('modalProductName').value = name;
      document.getElementById('modalProductPrice').value = price;
      document.getElementById('modalProductQuantity').value = quantity;
      
      // Calculate delivery fee and total
      const deliveryPrice = calculateDeliveryFee('Bhagwal Awan'); // Default to Bhagwal Awan
      const total = (price * quantity) + deliveryPrice;
      
      // Update order summary
      document.getElementById('orderSummary').innerHTML = `
        <p><strong>Product:</strong> ${name} (Qty: ${quantity})</p>
        <p><strong>Product Price:</strong> Rs ${price * quantity}</p>
        <p><strong>Delivery Fee:</strong> Rs ${deliveryPrice}</p>
        <p><strong>Total Amount:</strong> Rs ${total}</p>
      `;
      
      // Show the modal
      document.getElementById('orderModal').classList.add('active');
    }

    function processOrderFromModal() {
      const name = document.getElementById('modalProductName').value;
      const price = parseFloat(document.getElementById('modalProductPrice').value);
      const quantity = parseInt(document.getElementById('modalProductQuantity').value);
      const customerName = document.getElementById('customerName').value;
      const mobile = document.getElementById('mobile').value;
      const location = document.getElementById('location').value;
      const deliveryTime = document.getElementById('deliveryTime').value;
      const payment = document.getElementById('paymentMethod').value;
      const notes = document.getElementById('notes').value;
      
      // Validate inputs
      if (!customerName || customerName.trim().length < 2) {
        showAlert('Please enter a valid name');
        return;
      }
      
      if (!/^03\d{9}$/.test(mobile)) {
        showAlert('Please enter a valid Pakistani mobile number starting with 03');
        return;
      }
      
      if (!location) {
        showAlert('Please select a delivery area');
        return;
      }
      
      const deliveryPrice = calculateDeliveryFee(location);
      const total = (price * quantity) + deliveryPrice;
      
      const order = {
        product: `${name} (Qty: ${quantity})`,
        customerName: customerName.trim(),
        mobile: mobile.trim(),
        location: location.trim(),
        deliveryTime,
        payment,
        deliveryPrice,
        productPrice: price,
        quantity,
        total,
        notes: notes.trim(),
        date: new Date().toLocaleString(),
        status: 'Processing'
      };
      
      processOrder(order);
      closeModal();
    }

    function calculateDeliveryFee(location) {
      const lowerLocation = location.toLowerCase();
      if (BUSINESS.delivery.freeAreas.some(area => lowerLocation.includes(area.toLowerCase()))) {
        return BUSINESS.delivery.standardFee;
      }
      return BUSINESS.delivery.otherFee;
    }

    function processOrder(order) {
      // Add current user info to order
      if (currentUser) {
        order.userId = currentUser.id;
        order.username = currentUser.name;
      }
      
      // Save order to "backend" (localStorage in this implementation)
      saveOrder(order);
      
      // Add to cart (for order history)
      addToCart(order.product.split(' (Qty:')[0], order.productPrice, order.quantity);
      
      // Send notifications
      sendWhatsAppNotification(order);
      sendEmailNotification(order);
      
      // Show confirmation
      showOrderConfirmation(order);
    }

    function sendWhatsAppNotification(order) {
      const message = `🛒 *${BUSINESS.name} - New Order* 🛒
      
📦 Product: ${order.product}
👤 Customer: ${order.customerName}
📞 Phone: ${order.mobile}
📍 Address: ${order.location}
⏱ Delivery Time: ${order.deliveryTime}
💰 Total Amount: Rs ${order.total}

Payment Method: ${order.payment}
${order.notes ? `\nNotes: ${order.notes}` : ''}

Order Time: ${order.date}`;

      const whatsappUrl = `https://wa.me/${BUSINESS.whatsapp}?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');
    }

    function sendEmailNotification(order) {
      // This would be replaced with actual email sending code
      console.log('Email notification would be sent here with order details:', order);
    }

    function showOrderConfirmation(order) {
      const confirmation = `
        <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 20px 0; border-left: 4px solid #28a745;">
          <h3 style="color: #28a745; margin-bottom: 10px;">Order Confirmed!</h3>
          <p>Thank you for your order, ${order.customerName}!</p>
          <p>Your order of <strong>${order.product}</strong> will be delivered to ${order.location} in ${order.deliveryTime}.</p>
          <p><strong>Total Amount:</strong> Rs ${order.total}</p>
          <p>We've sent the details to your WhatsApp for confirmation.</p>
        </div>
      `;
      
      // If on orders page, prepend to list
      if (document.getElementById('ordersPage').style.display === 'block') {
        document.getElementById('ordersList').insertAdjacentHTML('afterbegin', confirmation);
      } else {
        showAlert(confirmation, null, 'Order Confirmed');
      }
    }

    function viewCart() {
      if (cartItems.length === 0) {
        showAlert('Your cart is empty');
        return;
      }
      
      let cartContent = '<h2>Your Shopping Cart</h2><ul style="list-style: none; padding: 0;">';
      let total = 0;
      
      cartItems.forEach(item => {
        cartContent += `
          <li style="padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between;">
            <span>${item.name} (${item.quantity})</span>
            <span>Rs ${item.totalPrice}</span>
          </li>
        `;
        total += item.totalPrice;
      });
      
      cartContent += `</ul>
        <div style="margin-top: 20px; font-weight: bold; text-align: right;">
          Total: Rs ${total}
        </div>
        <div style="margin-top: 20px; display: flex; justify-content: space-between;">
          <button onclick="clearCart()" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Clear Cart</button>
          <button onclick="checkoutCart()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Checkout</button>
        </div>
      `;
      
      showAlert(cartContent, null, 'Your Shopping Cart');
    }

    function clearCart() {
      cartItems = [];
      updateCartCount();
      closeAlert();
      showAlert('Your cart has been cleared');
    }

    function checkoutCart() {
      if (cartItems.length === 0) {
        showAlert('Your cart is empty');
        return;
      }
      
      if (!isLoggedIn) {
        showAlert('Please sign in to complete your purchase', signIn);
        return;
      }
      
      closeAlert(); // Close the cart view
      
      // Calculate total
      const subtotal = cartItems.reduce((sum, item) => sum + item.totalPrice, 0);
      const deliveryPrice = calculateDeliveryFee('Bhagwal Awan'); // Default
      const total = subtotal + deliveryPrice;
      
      // Set up modal for checkout
      document.getElementById('modalProductName').value = 'Multiple Items';
      document.getElementById('modalProductPrice').value = subtotal;
      document.getElementById('modalProductQuantity').value = 1;
      
      // Update order summary with all items
      let productsList = cartItems.map(item => 
        `${item.name} (Qty: ${item.quantity}) - Rs ${item.totalPrice}`
      ).join('<br>');
      
      document.getElementById('orderSummary').innerHTML = `
        <p><strong>Products:</strong><br>${productsList}</p>
        <p><strong>Subtotal:</strong> Rs ${subtotal}</p>
        <p><strong>Delivery Fee:</strong> Rs ${deliveryPrice}</p>
        <p><strong>Total Amount:</strong> Rs ${total}</p>
      `;
      
      // Show the modal
      document.getElementById('orderModal').classList.add('active');
    }

    function showOrders() {
      document.querySelector('.grocery-gallery').style.display = 'none';
      document.querySelector('.hero').style.display = 'none';
      document.getElementById('ordersPage').style.display = 'block';
      
      const ordersList = document.getElementById('ordersList');
      ordersList.innerHTML = '';
      
      // Load orders each time the page is shown
      loadOrders();
      
      if (orders.length === 0) {
        ordersList.innerHTML = '<p style="text-align: center; color: #666;">You have no orders yet.</p>';
        return;
      }
      
      // Filter orders based on user role
      let filteredOrders = orders;
      if (!isAdmin && currentUser) {
        // Regular users only see their own orders
        filteredOrders = orders.filter(order => order.userId === currentUser.id);
      }
      
      if (filteredOrders.length === 0) {
        ordersList.innerHTML = '<p style="text-align: center; color: #666;">You have no orders yet.</p>';
        return;
      }
      
      // Show orders in reverse chronological order (without mutating source)
      const list = [...filteredOrders].reverse();
      list.forEach((order, i) => {
        // Find the actual index in the orders array for deletion
        const actualIndex = orders.findIndex(o => o.id === order.id);
        const orderCard = document.createElement('div');
        orderCard.className = 'order-card';
        orderCard.innerHTML = `
          <div class="order-header" style="align-items:center;">
            <div><strong>Order Date:</strong> ${order.date}</div>
            <div style="display:flex; gap:8px; align-items:center;">
              <div><strong>Status:</strong> ${order.status || 'Processing'}</div>
              <button class="btn" style="width:auto; background:#dc3545; color:#fff; padding:6px 10px;" onclick="deleteOrder(${actualIndex})">Delete</button>
            </div>
          </div>
          <div class="order-product">${order.product || 'Multiple Items'}</div>
          <div class="order-detail"><strong>Customer:</strong> ${order.customerName}</div>
          <div class="order-detail"><strong>Delivery to:</strong> ${order.location}</div>
          <div class="order-detail"><strong>Delivery Time:</strong> ${order.deliveryTime}</div>
          <div class="order-detail"><strong>Payment Method:</strong> ${order.payment}</div>
          ${order.notes ? `<div class=\"order-detail\"><strong>Notes:</strong> ${order.notes}</div>` : ''}
          <div style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
            <div class="order-detail"><strong>Subtotal:</strong> Rs ${order.productPrice * order.quantity || order.total - order.deliveryPrice}</div>
            <div class="order-detail"><strong>Delivery Fee:</strong> Rs ${order.deliveryPrice}</div>
            <div class="order-detail" style="font-weight: bold;"><strong>Total:</strong> Rs ${order.total}</div>
          </div>
        `;
        ordersList.appendChild(orderCard);
      });
    }

    function deleteOrder(idx) {
      if (!confirm('Delete this order?')) return;
      
      // Delete order from "backend"
      const orderId = orders[idx].id;
      deleteOrderById(orderId);
      
      // Reload orders and refresh display
      loadOrders();
      showOrders();
      updateCartCount();
    }

    // New functions for shared order management
    function generateOrderId() {
      return 'order_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }

    function saveOrder(order) {
      // In a real implementation, this would be an API call
      // For this demo, we'll use localStorage to simulate a backend
      let allOrders = [];
      const savedOrders = localStorage.getItem('all_orders');
      if (savedOrders) {
        allOrders = JSON.parse(savedOrders);
      }
      
      // Add ID if not present
      if (!order.id) {
        order.id = generateOrderId();
      }
      
      // Add timestamp if not present
      if (!order.date) {
        order.date = new Date().toLocaleString();
      }
      
      // Check if order already exists
      const existingIndex = allOrders.findIndex(o => o.id === order.id);
      if (existingIndex >= 0) {
        allOrders[existingIndex] = order;
      } else {
        allOrders.push(order);
      }
      
      localStorage.setItem('all_orders', JSON.stringify(allOrders));
    }

    function loadOrders() {
      // In a real implementation, this would be an API call
      const savedOrders = localStorage.getItem('all_orders');
      if (savedOrders) {
        orders = JSON.parse(savedOrders);
      } else {
        orders = [];
      }
    }

    function deleteOrderById(orderId) {
      // In a real implementation, this would be an API call
      let allOrders = [];
      const savedOrders = localStorage.getItem('all_orders');
      if (savedOrders) {
        allOrders = JSON.parse(savedOrders);
      }
      
      // Filter out the order with the given ID
      allOrders = allOrders.filter(order => order.id !== orderId);
      
      // Save updated orders
      localStorage.setItem('all_orders', JSON.stringify(allOrders));
    }

    function signIn() {
      const username = prompt('Enter your username:');
      if (!username) return;
      const password = prompt('Enter your password:');
      if (password === null) return;

      const adminUser = 'Malik Zaid Awan';
      const adminPass = 'Zaid';

      if (username.trim().toLowerCase() === adminUser.toLowerCase()) {
        if (password === adminPass) {
          isLoggedIn = true;
          isAdmin = true;
          currentUser = { id: 'admin_1', name: adminUser, role: 'admin' };
          document.getElementById('nav-greeting').textContent = `Hello, ${adminUser}`;
          document.getElementById('nav-account-label').textContent = 'Admin';
          const adminLink = document.getElementById('adminLink');
          if (adminLink) adminLink.style.display = 'inline';
          const logoutLink = document.getElementById('logoutLink');
          if (logoutLink) logoutLink.style.display = 'inline';
          showAlert('Welcome back, Admin!');
          showAdminPanel();
          return;
        } else {
          showAlert('Invalid admin credentials');
          return;
        }
      }

      // Non-admin login
      isLoggedIn = true;
      isAdmin = false;
      currentUser = { id: 'user_' + username.toLowerCase().replace(/\s+/g, '_'), name: username, role: 'customer' };
      document.getElementById('nav-greeting').textContent = `Hello, ${username}`;
      document.getElementById('nav-account-label').textContent = 'Your Account';
      const adminLink = document.getElementById('adminLink');
      if (adminLink) adminLink.style.display = 'none';
      const logoutLink = document.getElementById('logoutLink');
      if (logoutLink) logoutLink.style.display = 'inline';
      showAlert(`Welcome back, ${username}!`);
    }

    function logoutUser() {
      isLoggedIn = false;
      isAdmin = false;
      currentUser = null;
      const greet = document.getElementById('nav-greeting');
      if (greet) greet.textContent = 'Hello, sign in';
      const accountLabel = document.getElementById('nav-account-label');
      if (accountLabel) accountLabel.textContent = 'Account';
      const adminLink = document.getElementById('adminLink');
      if (adminLink) adminLink.style.display = 'none';
      const logoutLink = document.getElementById('logoutLink');
      if (logoutLink) logoutLink.style.display = 'none';
      // Hide admin page if visible
      const adminPage = document.getElementById('adminPage');
      if (adminPage && adminPage.style.display === 'block') {
        adminPage.style.display = 'none';
      }
      // Ensure main shop is visible
      const gallery = document.querySelector('.grocery-gallery');
      if (gallery) gallery.style.display = 'flex';
      const hero = document.querySelector('.hero');
      if (hero) hero.style.display = 'flex';
      const ordersPage = document.getElementById('ordersPage');
      if (ordersPage) ordersPage.style.display = 'none';
      showAlert('You have been logged out.');
    }

    function updateCartCount() {
      const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').textContent = totalItems;
    }

    function showAlert(message, callback = null, title = 'Notice') {
      document.getElementById('alertTitle').textContent = title;
      document.getElementById('alertMessage').innerHTML = message;
      document.getElementById('alertModal').classList.add('active');
      
      // Store callback to run when alert is closed
      if (callback) {
        document.getElementById('alertModal').callback = callback;
      } else {
        document.getElementById('alertModal').callback = null;
      }
    }

    function closeAlert() {
      const modal = document.getElementById('alertModal');
      modal.classList.remove('active');
      
      // Execute callback if one was provided
      if (modal.callback) {
        modal.callback();
      }
    }

    function closeModal() {
      document.getElementById('orderModal').classList.remove('active');
    }

    // Utilities to render dynamic product cards and improved search
    function escapeQuotes(str) { return String(str || '').replace(/'/g, "\\'"); }

    function createProductCard(product) {
      const safeName = escapeQuotes(product.name);
      return `
        <div class="grocery-item">
          <img src="${product.image}" alt="${product.name}">
          <div class="grocery-title">${product.name}</div>
          <div class="grocery-price">Rs ${product.price}</div>
          <div class="grocery-desc">${product.description || ''}</div>
          <div class="quantity-controls">
            <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
            <input type="number" class="quantity-input" value="1" min="1" max="10">
            <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
          </div>
          <button class="btn" onclick="addToCart('${safeName}', ${product.price}, this.parentElement.querySelector('.quantity-input').value)">Add to Cart</button>
          <button class="btn buy-now" onclick="buyNow('${safeName}', ${product.price}, this.parentElement.querySelector('.quantity-input').value)">Buy Now</button>
        </div>
      `;
    }

    function appendMissingProducts() {
      const gallery = document.querySelector('.grocery-gallery');
      if (!gallery) return;
      const existingTitles = new Set(Array.from(document.querySelectorAll('.grocery-item .grocery-title')).map(el => el.textContent.trim().toLowerCase()));
      PRODUCTS.forEach(p => {
        const title = (p.name || '').trim().toLowerCase();
        if (title && !existingTitles.has(title)) {
          gallery.insertAdjacentHTML('beforeend', createProductCard(p));
        }
      });
    }

    // Override the old search with a DOM filter using product cards
    function handleSearch() {
      const inputEl = document.querySelector('.search-input');
      const term = (inputEl.value || '').trim().toLowerCase();

      const items = Array.from(document.querySelectorAll('.grocery-item'));
      let matches = 0;

      items.forEach(card => {
        const title = (card.querySelector('.grocery-title')?.textContent || '').toLowerCase();
        const desc = (card.querySelector('.grocery-desc')?.textContent || '').toLowerCase();
        const isMatch = !term || title.includes(term) || desc.includes(term);
        card.style.display = isMatch ? '' : 'none';
        if (isMatch && term) matches++;
      });

      if (!term) {
        document.querySelector('.grocery-gallery').scrollIntoView({ behavior: 'smooth' });
        return;
      }

      if (matches > 0) {
        showAlert(`Found ${matches} product${matches > 1 ? 's' : ''} matching "${term}"`);
        const first = document.querySelector('.grocery-item:not([style*="display: none"])');
        if (first) first.scrollIntoView({ behavior: 'smooth', block: 'center' });
      } else {
        showAlert('No products found matching your search');
      }
    }

    // Contact helper and navigation place order
    function showContact() {
      const phoneDisplay = '+92 336 55582';
      const phoneDial = '+9233655582';
      const message = `
        <p>You can reach us at:</p>
        <p><strong>Phone:</strong> <a href="tel:${phoneDial}">${phoneDisplay}</a></p>
        <p><strong>WhatsApp:</strong> <a target="_blank" href="https://wa.me/${BUSINESS.whatsapp}">Chat on WhatsApp</a></p>
      `;
      showAlert(message, null, 'Connect with Us');
    }

    function placeOrderFromNav() {
      if (cartItems.length === 0) {
        showAlert('Your cart is empty. Add items to the cart first, then click Place Order.');
        return;
      }
      checkoutCart();
    }

    // Admin helpers
    function escAttr(str) {
      return String(str || '').replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/</g, '&lt;');
    }

    function loadProductsFromStorage() {
      try {
        const saved = localStorage.getItem('PRODUCTS');
        if (saved) {
          const arr = JSON.parse(saved);
          if (Array.isArray(arr)) {
            PRODUCTS.length = 0;
            PRODUCTS.push(...arr);
          }
        }
      } catch (e) { console.warn('Failed to load saved products', e); }
    }

    function saveProducts() {
      try { localStorage.setItem('PRODUCTS', JSON.stringify(PRODUCTS)); }
      catch (e) { console.warn('Failed to save products', e); }
    }

    function refreshGallery() {
      const gallery = document.querySelector('.grocery-gallery');
      if (!gallery) return;
      gallery.innerHTML = '';
      PRODUCTS.forEach(p => gallery.insertAdjacentHTML('beforeend', createProductCard(p)));
    }

    function adminLogin() {
      let stored = localStorage.getItem('adminPassword');
      if (!stored) {
        const p1 = prompt('Set a new admin password (min 4 chars):');
        if (!p1 || p1.length < 4) { showAlert('Password too short'); return; }
        const p2 = prompt('Confirm admin password:');
        if (p1 !== p2) { showAlert('Passwords do not match'); return; }
        localStorage.setItem('adminPassword', p1);
        stored = p1;
      }
      const pwd = prompt('Enter admin password:');
      if (pwd === stored) {
        isAdmin = true;
        isLoggedIn = true;
        document.getElementById('nav-greeting').textContent = 'Hello, admin';
        document.getElementById('nav-account-label').textContent = 'Admin';
        const link = document.getElementById('adminLink');
        if (link) link.style.display = 'inline';
        showAdminPanel();
      } else {
        showAlert('Invalid admin password');
      }
    }

    function showAdminPanel() {
      document.getElementById('ordersPage').style.display = 'none';
      document.querySelector('.grocery-gallery').style.display = 'none';
      document.querySelector('.hero').style.display = 'none';
      document.getElementById('adminPage').style.display = 'block';
      renderAdminList();
    }

    function hideAdminPanel() {
      document.getElementById('adminPage').style.display = 'none';
      document.querySelector('.grocery-gallery').style.display = 'flex';
      document.querySelector('.hero').style.display = 'flex';
    }

    function renderAdminList() {
      const list = document.getElementById('adminProductsList');
      list.innerHTML = '';
      PRODUCTS.forEach((p, idx) => {
        list.insertAdjacentHTML('beforeend', `
          <div class="order-card" style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end;">
            <div style="flex:1; min-width:180px;">
              <label style="display:block; font-size:12px; color:#555;">Name</label>
              <input id="pname-${idx}" value="${escAttr(p.name)}" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:4px;">
            </div>
            <div>
              <label style="display:block; font-size:12px; color:#555;">Price</label>
              <input id="pprice-${idx}" type="number" min="0" value="${escAttr(p.price)}" style="width:120px; padding:10px; border:1px solid #ddd; border-radius:4px;">
            </div>
            <div style="flex:1; min-width:220px;">
              <label style="display:block; font-size:12px; color:#555;">Image</label>
              <input id="pimage-${idx}" value="${escAttr(p.image)}" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:4px;">
            </div>
            <div style="flex:2; min-width:240px;">
              <label style="display:block; font-size:12px; color:#555;">Description</label>
              <input id="pdesc-${idx}" value="${escAttr(p.description || '')}" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:4px;">
            </div>
            <div style="display:flex; gap:8px;">
              <button class="btn" style="width:auto;" onclick="saveProductAt(${idx})">Save</button>
              <button class="btn" style="width:auto; background:#dc3545; color:white;" onclick="deleteProductAt(${idx})">Delete</button>
            </div>
          </div>
        `);
      });
    }

    function addNewProduct() {
      const name = document.getElementById('adminAddName').value.trim();
      const price = parseFloat(document.getElementById('adminAddPrice').value);
      const image = document.getElementById('adminAddImage').value.trim();
      const desc = document.getElementById('adminAddDesc').value.trim();
      if (!name) { showAlert('Product name is required'); return; }
      if (isNaN(price) || price < 0) { showAlert('Please enter a valid price'); return; }
      PRODUCTS.push({ name, price, image, description: desc });
      saveProducts();
      refreshGallery();
      renderAdminList();
      document.getElementById('adminAddName').value = '';
      document.getElementById('adminAddPrice').value = '';
      document.getElementById('adminAddImage').value = '';
      document.getElementById('adminAddDesc').value = '';
      showAlert('Product added');
    }

    function saveProductAt(idx) {
      const name = document.getElementById(`pname-${idx}`).value.trim();
      const price = parseFloat(document.getElementById(`pprice-${idx}`).value);
      const image = document.getElementById(`pimage-${idx}`).value.trim();
      const desc = document.getElementById(`pdesc-${idx}`).value.trim();
      if (!name) { showAlert('Product name is required'); return; }
      if (isNaN(price) || price < 0) { showAlert('Please enter a valid price'); return; }
      PRODUCTS[idx].name = name;
      PRODUCTS[idx].price = price;
      PRODUCTS[idx].image = image;
      PRODUCTS[idx].description = desc;
      saveProducts();
      refreshGallery();
      showAlert('Product updated');
    }

    function deleteProductAt(idx) {
      if (!confirm('Delete this product?')) return;
      PRODUCTS.splice(idx, 1);
      saveProducts();
      refreshGallery();
      renderAdminList();
    }

    // Add EmailJS script
    (function(){
      var script = document.createElement('script');
      script.src = 'https://cdn.emailjs.com/dist/email.min.js';
      script.onload = function() {
        emailjs.init('YOUR_USER_ID'); // Replace with your actual EmailJS User ID
      };
      document.head.appendChild(script);
    })();
  // View navigation controls
    function showOrders() {
      const gallery = document.querySelector('.grocery-gallery');
      const hero = document.querySelector('.hero');
      const ordersPage = document.getElementById('ordersPage');
      const adminPage = document.getElementById('adminPage');
      if (gallery) gallery.style.display = 'none';
      if (hero) hero.style.display = 'none';
      if (adminPage) adminPage.style.display = 'none';
      if (ordersPage) ordersPage.style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function hideOrders() {
      const gallery = document.querySelector('.grocery-gallery');
      const hero = document.querySelector('.hero');
      const ordersPage = document.getElementById('ordersPage');
      if (ordersPage) ordersPage.style.display = 'none';
      if (hero) hero.style.display = '';
      if (gallery) gallery.style.display = '';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showAdminPanel() {
      const gallery = document.querySelector('.grocery-gallery');
      const hero = document.querySelector('.hero');
      const ordersPage = document.getElementById('ordersPage');
      const adminPage = document.getElementById('adminPage');
      if (gallery) gallery.style.display = 'none';
      if (hero) hero.style.display = 'none';
      if (ordersPage) ordersPage.style.display = 'none';
      if (adminPage) adminPage.style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function hideAdminPanel() {
      const gallery = document.querySelector('.grocery-gallery');
      const hero = document.querySelector('.hero');
      const adminPage = document.getElementById('adminPage');
      if (adminPage) adminPage.style.display = 'none';
      if (hero) hero.style.display = '';
      if (gallery) gallery.style.display = '';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Auth persistence additions
    (function() {
      const AUTH_KEY = 'auth_state';
      function saveAuthState() {
        try { localStorage.setItem(AUTH_KEY, JSON.stringify({ isLoggedIn, isAdmin, currentUser })); } catch (e) {}
      }
      function clearAuthState() { try { localStorage.removeItem(AUTH_KEY); } catch (e) {} }
      function applyAuthUI() {
        const greet = document.getElementById('nav-greeting');
        const accountLabel = document.getElementById('nav-account-label');
        const adminLink = document.getElementById('adminLink');
        const logoutLink = document.getElementById('logoutLink');
        if (isLoggedIn && currentUser) {
          if (greet) greet.textContent = `Hello, ${currentUser.name || 'user'}`;
          if (accountLabel) accountLabel.textContent = isAdmin ? 'Admin' : 'Your Account';
          if (adminLink) adminLink.style.display = isAdmin ? 'inline' : 'none';
          if (logoutLink) logoutLink.style.display = 'inline';
        } else {
          if (greet) greet.textContent = 'Hello, sign in';
          if (accountLabel) accountLabel.textContent = 'Account';
          if (adminLink) adminLink.style.display = 'none';
          if (logoutLink) logoutLink.style.display = 'none';
        }
      }
      function restoreAuthState() {
        try {
          const raw = localStorage.getItem(AUTH_KEY);
          if (raw) {
            const data = JSON.parse(raw);
            isLoggedIn = !!data.isLoggedIn;
            isAdmin = !!data.isAdmin;
            currentUser = data.currentUser || null;
          }
        } catch (e) {
          console.warn('Failed to restore auth state', e);
        } finally {
          applyAuthUI();
        }
      }
      document.addEventListener('DOMContentLoaded', restoreAuthState);
      window.addEventListener('beforeunload', saveAuthState);

      // Wrap existing signIn/logoutUser to persist/clear state
      if (typeof window.signIn === 'function') {
        const __origSignIn = window.signIn;
        window.signIn = function() {
          const result = __origSignIn.apply(this, arguments);
          if (isLoggedIn) { saveAuthState(); applyAuthUI(); }
          return result;
        };
      }
      if (typeof window.logoutUser === 'function') {
        const __origLogout = window.logoutUser;
        window.logoutUser = function() {
          const result = __origLogout.apply(this, arguments);
          clearAuthState();
          applyAuthUI();
          return result;
        };
      }
    })();
  </script>
</body>
</html>